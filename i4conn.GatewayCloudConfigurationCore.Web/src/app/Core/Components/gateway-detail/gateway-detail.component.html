<div>
  <div class="row">
    <i class="fa-arrow-circle-left col-3 col-1 col-md-2 col-lg-3" [ngClass]="hover ? 'fad' : 'fal'" (click)="back()" (mouseenter)="hover = !hover" (mouseleave)="hover = !hover"></i>
    <header class="col-8 col-md-8 col-lg-6 row" style="place-items: center;">
      <h1 class="col-12">Impostazioni Gateway</h1>
      <p class="col-10">Informazioni di base e informazioni di destinazione (Nome, descrizione, Ip server, ecc.)</p>
    </header>
    <i class="col-1 col-md-2 col-lg-3"></i>
  </div>

  <form novalidate [formGroup]="gatewayForm" (ngSubmit)="onSubmit()">
    <div class="row row-info">
      <div class="info-base container col-sm">
        <div class="box">
          <div>
            <h2><i class="fal fa-info-square"></i> Informazioni di base</h2>
          </div>
          <div class="row">
            <div class="col col-lg-4">
              <div class="row">
                <h3 class="titolo col-4">ID*</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" maxlength="3" formControlName="gatewayId" placeholder="ID" required>
                  <mat-error *ngIf="gatewayForm.controls['gatewayId'].hasError('required')">ID è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['gatewayId'].hasError('maxlength')">Massimo <strong>3</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col col-lg-8">
              <div class="row">
                <h3 class="titolo col-4">NOME*</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" maxlength="30" formControlName="gatewayName" placeholder="Nome" value="{{gatewayForm.get('gatewayName')!.value | titlecase}}" required>
                  <mat-error *ngIf="gatewayForm.controls['gatewayName'].hasError('required')">Nome è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['gatewayName'].hasError('maxlength')">Massimo <strong>30</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-sm-2">DESCRIZIONE*</h3>
                <mat-form-field appearance="outline" class="full-width col-sm-8">
                  <input matInput type="text" maxlength="255" formControlName="description" placeholder="Descrizione" required>
                  <mat-error *ngIf="gatewayForm.controls['description'].hasError('required')">Descrizione è <strong>obbligatoria</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['description'].hasError('maxlength')">Massim <strong>255</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-sm-2">SERIAL NUMBER*</h3>
                <mat-form-field appearance="outline" class="full-width col-sm-8">
                  <input matInput type="text" maxlength="15" formControlName="serialNumber" placeholder="Serial Number" value="{{gatewayForm.get('serialNumber')!.value | uppercase}}" required>
                  <mat-error *ngIf="gatewayForm.controls['serialNumber'].hasError('required')">serialNumber è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['serialNumber'].hasError('maxlength')">Massimo <strong>15</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-sm-2">LOCATION*</h3>
                <mat-form-field appearance="outline" class="full-width col-sm-8">
                  <input matInput type="text" maxlength="50" formControlName="location" placeholder="Location" value="{{gatewayForm.get('location')!.value | titlecase}}" required>
                  <mat-error *ngIf="gatewayForm.controls['location'].hasError('required')">Location è <strong>obbligatoria</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['location'].hasError('maxlength')">Massimo <strong>50</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="info-base container col-sm">
        <div class="box" [ngClass]="destSec ? 'destSec' : '' ">
          <div>
            <h2><i class="fal fa-desktop-alt"></i> Informazioni di destinazione</h2>
          </div>
          <div class="row">
            <div class="col col-lg-7">
              <div class="row">
                <h3 class="titolo col-5">IP SERVER*</h3>
                <mat-form-field appearance="outline" class="full-width col-7">
                  <input matInput type="ipaddress" maxlength="15" formControlName="destinationIp" placeholder="0.0.0.0" mask="IP" [dropSpecialCharacters]="false" required>
                  <mat-error *ngIf="gatewayForm.controls['destinationIp'].hasError('required')">Server IP è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationIp'].hasError('maxlength')">Massimo <strong>15</strong> caratteri.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationIp'].hasError('pattern')">Formato <strong>Errato</strong>.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col col-lg-5">
              <div class="row">
                <h3 class="titolo col-6">PORTA SERVER*</h3>
                <mat-form-field appearance="outline" class="full-width col-6">
                  <input matInput type="number" maxlength="10" formControlName="destinationPort" placeholder="5000" mask="00000" required>
                  <mat-error *ngIf="gatewayForm.controls['destinationPort'].hasError('required')">Porta è <strong>obbligatoria</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationPort'].hasError('maxlength')">Massimo <strong>10</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="row">
                <h3 class="titolo col-4">USERNAME*</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" maxlength="20" formControlName="destinationUser" placeholder="Username" value="{{gatewayForm.get('destinationUser')!.value | titlecase}}" required>
                  <mat-error *ngIf="gatewayForm.controls['destinationUser'].hasError('required')">Username è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationUser'].hasError('maxlength')">Massimo <strong>20</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col">
              <div class="row">
                <h3 class="titolo col-4">PASSWORD*</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" placeholder="Password" maxlength="20" formControlName="destinationPassword" required>
                  <mat-error *ngIf="gatewayForm.controls['destinationPassword'].hasError('required')">Password è <strong>obbligatoria</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationPassword'].hasError('maxlength')">Massimo <strong>20</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div style="padding-right: 15px;">
            <a class="container-destSec" (click)="AddDestSec()">
              <span>Aggiungi destinazione secondaria</span>
            </a>
          </div>
        </div>




        <div class="box" [ngClass]="destSec ? '' : 'destSec' ">
          <div>
            <h2><i class="fal fa-desktop-alt"></i> Informazioni di destinazione secondaria</h2>
          </div>
          <div class="row">
            <div class="col col-lg-7">
              <div class="row">
                <h3 class="titolo col-5">IP SERVER</h3>
                <mat-form-field appearance="outline" class="full-width col-7">
                  <input matInput type="ipaddress" formControlName="destinationSecondaryIp" maxlength="15" placeholder="0.0.0.0" mask="IP">
                  <mat-error *ngIf="gatewayForm.controls['destinationSecondaryIp'].hasError('maxlength')">Massimo <strong>15</strong> caratteri.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['destinationSecondaryIp'].hasError('pattern')">Formato <strong>Errato</strong>.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col col-lg-5">
              <div class="row">
                <h3 class="titolo col-6">PORTA SERVER</h3>
                <mat-form-field appearance="outline" class="full-width col-6">
                  <input matInput type="text" formControlName="destinationSecondaryPort" maxlength="10" placeholder="5000">
                  <mat-error *ngIf="gatewayForm.controls['destinationSecondaryPort'].hasError('maxlength')">Massimo <strong>10</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">USERNAME</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" maxlength="20" formControlName="destinationSecondaryUser" placeholder="Username" value="{{gatewayForm.get('destinationSecondaryUser')!.value | titlecase}}">
                  <mat-error *ngIf="gatewayForm.controls['destinationSecondaryUser'].hasError('maxlength')">Massimo <strong>20</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">PASSWORD</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <input matInput type="text" placeholder="Password" maxlength="20" formControlName="destinationSecondaryPassword">
                  <mat-error *ngIf="gatewayForm.controls['destinationSecondaryPassword'].hasError('maxlength')">Massimo <strong>50</strong> caratteri.</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div>
            <a class="container-destSec editPassword" (click)="Dest()">
              <span>destinazione primaria</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row row-info">
      <div class="info-base container col-sm">
        <div class="box">
          <div class="row">
            <h2><i class="fal fa-cog"></i> Versioni firmware</h2>
            <p class="searchFirmware">(cliccare sulla lente per cercare le versioni disponibili)</p>
          </div>
          <div class="row">
            <div class="col-lg-8">
              <div class="row">
                <h3 class="titolo col-3">FIRMAWARE ROOT*</h3>
                <mat-form-field appearance="outline" class="full-width col-7">
                  <input matInput type="text" maxlength="255" formControlName="firmwareRoot" placeholder="C:\i4conn\Server\Firmware" required>
                  <mat-error *ngIf="gatewayForm.controls['firmwareRoot'].hasError('required')">Firmaware root è <strong>obbligatorio</strong>.</mat-error>
                  <mat-error *ngIf="gatewayForm.controls['firmwareRoot'].hasError('maxlength')">Massimo <strong>255</strong> caratteri.</mat-error>
                </mat-form-field>
                <button type='button' mat-raised-button color="primary" class="btn-search col-1" (click)="cercaVersioni(gatewayForm.get('firmwareRoot')!.value)">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="row">
                <div class="col-12 col-lg-2"></div>
                <h3 class="titolo col-3 col-lg-3">SUPERVISOR</h3>
                <mat-form-field appearance="outline" class="full-width col-9 col-lg-6">
                  <mat-select formControlName="versionSupervisor" placeholder="Versione {{gatewayForm.get('versionSupervisor')!.value}}">
                    <mat-option *ngFor="let versionSupervisor of versionSupervisors" [value]="versionSupervisor">{{versionSupervisor}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">DEVICE</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <mat-select formControlName="versionDevice" placeholder="Versione {{gatewayForm.get('versionDevice')!.value}}">
                    <mat-option *ngFor="let versionDevice of versionDevices" [value]="versionDevice">{{versionDevice}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">ROUTER</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <mat-select formControlName="versionRouter" placeholder="Versione {{gatewayForm.get('versionRouter')!.value}}">
                    <mat-option *ngFor="let versionRouter of versionRouters" [value]="versionRouter">{{versionRouter}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">RULES</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <mat-select formControlName="versionRules" placeholder="Versione {{gatewayForm.get('versionRules')!.value}}">
                    <mat-option *ngFor="let versionRules of versionRuleses" [value]="versionRules">{{versionRules}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm">
              <div class="row">
                <h3 class="titolo col-4">WEBAPP</h3>
                <mat-form-field appearance="outline" class="full-width col-8">
                  <mat-select formControlName="versionWebapp" placeholder="Versione {{gatewayForm.get('versionWebapp')!.value}}">
                    <mat-option *ngFor="let versionWebapp of versionWebapps" [value]="versionWebapp">{{versionWebapp}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="submit row">
        <button *ngIf="IsEditMode()" mat-raised-button class="col-sm btn" color="warn" type="button"
          (click)="Delete()">Elimina</button>
        <button mat-raised-button class="col-sm btn" color="primary" type="submit"
                [disabled]="gatewayForm.invalid" [ngClass]="gatewayForm.invalid ? 'btn-disabled' : ''">
        Salva</button>
      </div>
    </footer>
  </form>
</div>
